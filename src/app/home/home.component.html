<div class="logo" *ngIf="messages.length <= 0">
	<img src="./assets/images/copilot_logo.png" alt="copilot-logo" />
</div>

<div *ngFor="let message of messages; let last = last; let i = index" class="message">
	<div class="flex-row" [ngClass]="message.source === ChatMessageSource.USER ? 'my-message' : 'ia-message'">
		<img
			[hidden]="message.source === ChatMessageSource.USER"
			[ngClass]="last && message.beingSpoken ? 'blink' : ''"
			class="mr16 ia-avatar"
			src="./assets/images/copilot_logo.png"
			alt="copilot-logo"
		/>
		<zco-chat-message [message]="message" [previousMessage]="i > 0 ? messages[i - 1] : null"></zco-chat-message>
	</div>
</div>

<form class="question-container" ngForm>
	<ut-autocomplete-input
		class="mr8"
		[required]="false"
		[i18nLabel]="'enter.message'"
		[optionLabelFn]="searchOptionLabelFn"
		[inputLabelFn]="searchOptionLabelFn"
		[optionService]="getSearchProposalFunction"
		[minLength]="0"
		[formControl]="searchCtrl"
		(optionSelected)="selectFaqOption($event)"
	/>

	<button type="submit" mat-icon-button [obButton]="'primary'" (click)="sendToLLM()" [disabled]="!searchCtrl.value">
		<mat-icon svgIcon="paper-plane"></mat-icon>
	</button>

	<button type="button" mat-icon-button (click)="clearChat()" [obButton]="'secondary'">
		<mat-icon svgIcon="trash"></mat-icon>
	</button>
</form>
