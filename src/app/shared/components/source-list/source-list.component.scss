:host {
	display: block;
	font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
}

/* Layout */
.source-list {
	display: grid;
	gap: 1rem;
	margin: 0;
	padding: 0;
	list-style: none;
}

.source-card {
	background: #ffffff;
	border: 1px solid #e5e7eb;
	border-radius: 0.75rem;
	padding: 1rem;
	box-shadow: 0 1px 2px rgba(0, 0, 0, .05);
	transition: box-shadow .2s;
	min-width: 100% !important;
	max-width: 100% !important;
}
.source-card:hover {
	box-shadow: 0 4px 8px rgba(0, 0, 0, .08);
}

.source-header {
	display: flex;
	align-items: center;
	gap: .75rem;
	margin-bottom: .5rem;
}

/* Icons using tiny inline SVGs so no external dep required */
.source-icon {
	width: 1.5rem;
	height: 1.5rem;
	display: inline-block;
	background-size: contain;
	background-repeat: no-repeat;
	flex: 0 0 1.5rem;
}
.source-icon.file {
	background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%23445566" d="M14 2H6a2 2 0 0 0-2 2v16c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V8z"/><path fill="%2399a" d="M14 2v6h6"/></svg>');
}

/* Text */
.source-title {
	margin: 0;
	font-size: 1rem;
	font-weight: 600;
	flex: 1 1 auto;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}
.source-title a,
.source-title button {
	color: #2563eb;
	text-decoration: none;
	background: none;
	border: none;
	padding: 0;
	cursor: pointer;
	font: inherit;
}
.source-title a:hover,
.source-title button:hover {
	text-decoration: underline;
}

/* Metadata list */
.source-meta {
	display: flex;
	flex-wrap: wrap;
	gap: 1rem;
	margin: 0;
	font-size: .875rem;
	color: #475569;
	padding: 0;
	list-style: none;
}

/* --- Actions --- */
.source-actions {
	margin-top: .6rem;
	display: flex;
	align-items: center;
	gap: .5rem;

	.icon-btn {
		--size: 34px;
		width: var(--size);
		height: var(--size);
		border-radius: 999px;
		border: 1px solid #d7dbe0;
		background: #fff;
		display: inline-grid;
		place-items: center;
		cursor: pointer;
		transition: transform .04s ease, background .15s ease, border-color .15s ease;
		svg { width: 18px; height: 18px; fill: currentColor; }
		&:active { transform: translateY(1px); }
		&.active { border-color: transparent; box-shadow: inset 0 0 0 999px rgba(0,0,0,.03); }
	}

	.upvote {
		color: #1b7f3b;
		&:hover { background: #e8f5ec; border-color: #cfe8da; }
		&.active { background: #def4e6; }
	}

	.downvote {
		color: #b03131;
		&:hover { background: #fdeaea; border-color: #f3c8c8; }
		&.active { background: #fde3e3; }
	}

	.vote-chip {
		display: inline-flex;
		align-items: center;
		gap: .4rem;
		font-size: .85rem;
		color: #3b3f45;

		.dot {
			width: .5rem; height: .5rem; border-radius: 50%;
			&.positive { background: #1b7f3b; }
			&.negative { background: #b03131; }
		}
	}
}

/* --- Dialog --- */
.feedback-dialog {
	width: min(560px, 92vw);
	border: none;
	border-radius: 12px;
	padding: 0;
	box-shadow: 0 24px 64px rgba(0,0,0,.18);
	overflow: hidden;

	&::backdrop { background: rgba(0,0,0,.35); }

	form { padding: 1rem; }

	.dialog-header {
		display: grid;
		grid-template-columns: 40px 1fr auto;
		align-items: center;
		gap: .75rem;
		margin: -.5rem -1rem 1rem;
		padding: .75rem 1rem;
		background: #f7f8fa;
		border-bottom: 1px solid #eef0f2;

		.dialog-vote-icon {
			width: 32px; height: 32px; border-radius: 8px; display: grid; place-items: center;
			&.up { background: #def4e6; color: #1b7f3b; }
			&.down { background: #fde3e3; color: #b03131; }
			svg { width: 18px; height: 18px; fill: currentColor; }
		}

		.dialog-title { line-height: 1.2; }
		.dialog-subtitle { font-size: .85rem; color: #60656c; margin-top: .15rem; }

		.dialog-close {
			font-size: 20px; line-height: 1; border: none; background: transparent; cursor: pointer; color: #6a7179;
		}
	}

	.field {
		display: grid;
		gap: .35rem;
		margin-bottom: 1rem;

		span { font-size: .9rem; color: #3b3f45; }
		em { font-style: normal; color: #7a838c; }

		textarea {
			width: 100%;
			border: 1px solid #d7dbe0;
			border-radius: 8px;
			padding: .6rem .7rem;
			font: inherit;
			resize: vertical;
			min-height: 96px;

			&:focus { outline: none; border-color: #2563eb; box-shadow: 0 0 0 3px rgba(37,99,235,.12); }
		}
	}

	.dialog-actions {
		display: flex;
		justify-content: flex-end;
		gap: .5rem;

		.btn {
			border: 1px solid #cfd5db;
			background: #fff;
			padding: .5rem .9rem;
			border-radius: 8px;
			cursor: pointer;
			&.ghost:hover { background: #f4f6f8; }
			&.primary {
				border-color: #2563eb; background: #2563eb; color: #fff;
				&:disabled { opacity: .7; cursor: not-allowed; }
				&:hover:enabled { filter: brightness(1.03); }
			}
		}
	}
}

/* a11y helper */
.sr-only {
	position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,1px,1px); white-space: nowrap; border: 0;
}

.feedback-dialog .dialog-header .prev-info {
	margin-top: .25rem;
	font-size: .82rem;
	color: #64748b;

	.prev-badge {
		display: inline-block;
		padding: .08rem .4rem;
		border-radius: 999px;
		border: 1px solid #e2e8f0;
		background: #f8fafc;
		margin-left: .25rem;
		&.pos {
			border-color: #cfe8da; background: #def4e6; color: #1b7f3b;
		}
		&.neg {
			border-color: #f3c8c8; background: #fde3e3; color: #b03131;
		}
	}
}
